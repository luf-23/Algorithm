### 巴什博弈

详见：[博弈论讲解](https://www.cnblogs.com/Khada-Jhin/p/9609561.html)

题目链接：[巴什博弈](https://leetcode.cn/problems/nim-game/description/)

题目大意为两个顶尖聪明的人取石子，有一堆n个石子，每个人能取[1,m]个石子，不能拿的就输了，问先手和后手谁必胜？

结论：如果$n\%(m+1)==0$则**先手必输**。

### 尼姆博弈

题目链接：[Nim游戏](https://www.luogu.com.cn/problem/P2197)

两个顶尖聪明的人在玩游戏，有n堆石子，第$i$堆有$ai$个，每人每次能从一堆石子中取**任意多个石子但不能不取**，不能拿的人输，请问先手与后手谁必胜？

结论：所有石子异或起来，如果结果为**0**则**先手必输**。

### 阶梯博弈

详见：[阶梯博弈](https://www.cnblogs.com/fu3638/p/7471184.html)

另类的尼姆博弈，只需要看奇数堆，对奇数堆的石子做Nim游戏，因为偶数堆对它无影响，如果从偶数堆移动元素到下一个奇数堆，企图改变状态，那么只需要再从这堆移除刚刚的元素到下一堆就行，直到移到地面，变成Nim游戏。

### 威佐夫博弈

题目链接：[威佐夫博弈](https://www.luogu.com.cn/problem/P2252)

有两堆石子，每次有两种不同的取法：一是可以在任意的一堆中取走任意多的石子；二是可以在两堆中同时取走相同数量的石子。最后把石子全部取完者为胜者。

结论：设两堆石子的个数分别为a，b且a<b，则当$a=(b-a)*(1+\sqrt5)/2$，右边的数向下取整。

### 博弈论的SG函数

详见：[博弈论进阶之SG函数](https://www.cnblogs.com/zwfymqz/p/8469840.html)  [Nim游戏和SG函数](https://blog.csdn.net/A_Comme_Amour/article/details/79347291)

**ICG游戏（平等组合游戏）**：

1.游戏有两个人参与，二者轮流做出决策。且这两个人的决策都对自己最有利。

2.当有一人无法做出决策时游戏结束，无法做出决策的人输。无论二者如何做出决策，游戏可以在有限步内结束。

3.游戏中的同一个状态不可能多次抵达。且游戏不会有平局出现。任意一个游戏者在某一确定状态可以作出的决策集合只与当前的状态有关，而与游戏者无关。

**必胜态和必败态**：

**P-position**：必败态(简记为`P`)，即Previous-position,你可以直观的认为处于这种状态的人一定会**输**

**N-position**：必胜态(简记为`N`)，即Next-position，你可以直观的理解为处于这种状态的人一定会**赢**

更严谨的定义：

1. 无法移动的状态(即terminal-position)为P
2. `可以`移动到P的局面为N
3. `所有`移动都会进入N的局面为P

**SG函数**：

定义**mex**运算，它表示**最小的**不属于集合的**非负**整数，对于给定的有向无环图，定义每个点的SG函数为
$$
SG(x)=mex\{SG(y)|x\ can \ go\ to\ y\}
$$
根据这一定义，我们可以得出：

- 所有汇点的$SG$函数为0
- 当$SG(x)=0$时,该节点为必败点

- 当$SG(x)≠0$,该节点为必胜点

**过程**：

把原游戏分解成多个独立的子游戏，那么原游戏的SG函数值就是它的所有子游戏的SG函数值的异或。

即$sg(G)=sg(G1)\oplus{sg(G2)}\oplus{sg(G3)}\dots\oplus{sg(Gn)}$

分别考虑每一个子游戏，计算其SG值。

- SG值的计算方法：（重点）
  1. 可选步数为1~m的连续整数，直接取模即可，SG(x) = x % (m+1);
  2. 可选步数为任意步，SG(x) = x;
  3. 可选步数为一系列不连续的数，用模板计算。

对于Nim游戏，无论几堆石子，都可以把石子一堆一堆拉出来讨论，因为它满足两个条件：

- 双方操作对等，操作集合只和局面有关
- 双方游戏目标相同